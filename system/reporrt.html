<html>
<head>
    <title>JSON</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="text-align: center;">
    <h1>Report and Complaint</h1>

    <form id="Record" onsubmit="return save()">
        <label>First Name:</label>
        <input type="text" id="FNInput" placeholder="Enter First Name" required><br><br>

        <label>Last Name:</label>
        <input type="text" id="LNInput" placeholder="Enter Last Name" required><br><br>

        <label>Address:</label>
        <input type="text" id="ADInput" placeholder="Enter Address" required><br><br>

        <label>Email:</label>
        <input type="email" id="EInput" placeholder="Enter Email" required><br><br>

        <label>Complaint Type:</label>
        <select id="type" required>
            <option value="">--PLEASE SELECT--</option>
            <option value="">-- Please choose an option --</option>
            <option value="1-noise-complaint">1. Noise Complaint</option>
            <option value="2-garbage-problem">2. Garbage or Improper Waste Disposal</option>
            <option value="3-boundary-dispute">3. Boundary or Trespassing Dispute</option>
            <option value="4-public-disturbance">4. Public Disturbance or Drunkenness</option>
            <option value="5-domestic-violence">5. Domestic Violence or Family Quarrel</option>
            <option value="6-child-support">6. Child Support or Neglect</option>
            <option value="7-unsanitary-conditions">7. Unsanitary Living Conditions</option>
            <option value="8-stray-animals">8. Stray or Nuisance Animals</option>
            <option value="9-vandalism-theft">9. Vandalism or Petty Theft</option>
            <option value="10-curfew-violation">10. Curfew Violation</option>
            <option value="11-road-drainage">11. Road or Drainage Problem</option>
            <option value="12-streetlight-issue">12. Broken or Missing Streetlight</option>
            <option value="13-utility-issue">13. Water or Electricity Issue</option>
            <option value="14-suspicious-activity">14. Suspicious Person or Activity</option>
            <option value="15-lost-found">15. Lost and Found Report</option>
        </select><br><br>

        <textarea id="description" placeholder="Description (Optional)"></textarea><br><br>
        
        <button type="submit">Save</button>
    </form> 

    <h3>Saved Reports (JSON):</h3>
    <pre id="output" style="text-align: left; display: inline-block;"></pre>

    <script>
        const DB_KEY = "record";
        let db = JSON.parse(localStorage.getItem(DB_KEY)) || [];

        function save() {
            let f = document.getElementById("FNInput").value;
            let l = document.getElementById("LNInput").value;
            let a = document.getElementById("ADInput").value;
            let e = document.getElementById("EInput").value;
            let type = document.getElementById("type").value;
            let description = document.getElementById("description").value;
            let datetime = new Date().toLocaleString();

            db.push({
                first_name: f,
                last_name: l,
                address: a,
                email: e,
                category: type,
                description: description,
                date_time: datetime
            });
            
            localStorage.setItem(DB_KEY, JSON.stringify(db));
            document.getElementById("Record").reset();
            show();
            return false; // prevent form submission refresh
        }

        function show() {
            document.getElementById("output").textContent = JSON.stringify(db, null, 2);
        }

        show(); // display on page load
    </script>
</body>
</html>
