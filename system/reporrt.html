<html>
<head>
    <title>JSON</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="text-align: center;">
    <h1>Report and Complaint</h1>

    <form id="Record" onsubmit="return save()">
        <label>First Name:</label>
        <input type="text" id="FNInput" placeholder="Enter First Name" required><br><br>

        <label>Last Name:</label>
        <input type="text" id="LNInput" placeholder="Enter Last Name" required><br><br>

        <label>Address:</label>
        <input type="text" id="ADInput" placeholder="Enter Address" required><br><br>

        <label>Email:</label>
        <input type="email" id="EInput" placeholder="Enter Email" required><br><br>

        <label>Complaint Type:</label>
        <select id="type" required>
            <option value="">--PLEASE SELECT--</option>
            <option value="Noise Complaint">Noise Complaint</option>
            <option value="Parking Complaint">Parking Complaint</option>
            <option value="Garbage Complaint">Garbage Complaint</option>
            <option value="Crime/Suspicious Activity Complaint">Crime/Suspicious Activity Complaint</option>
            <option value="Other">Other</option>
        </select><br><br>

        <textarea id="description" placeholder="Description (Optional)"></textarea><br><br>
        
        <button type="submit">Save</button>
    </form> 

    <h3>Saved Reports (JSON):</h3>
    <pre id="output" style="text-align: left; display: inline-block;"></pre>

    <script>
        const DB_KEY = "record";
        let db = JSON.parse(localStorage.getItem(DB_KEY)) || [];

        function save() {
            let f = document.getElementById("FNInput").value;
            let l = document.getElementById("LNInput").value;
            let a = document.getElementById("ADInput").value;
            let e = document.getElementById("EInput").value;
            let type = document.getElementById("type").value;
            let description = document.getElementById("description").value;
            let datetime = new Date().toLocaleString();

            db.push({
                first_name: f,
                last_name: l,
                address: a,
                email: e,
                category: type,
                description: description,
                date_time: datetime
            });
            
            localStorage.setItem(DB_KEY, JSON.stringify(db));
            document.getElementById("Record").reset();
            show();
            return false; // prevent form submission refresh
        }

        function show() {
            document.getElementById("output").textContent = JSON.stringify(db, null, 2);
        }

        show(); // display on page load
    </script>
</body>
</html>